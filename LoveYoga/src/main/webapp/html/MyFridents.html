<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>layout 后台大布局 - Layui</title>
  <link rel="stylesheet" href="../assets/layui/css/layui.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">爱上瑜伽</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item"><a href="">控制台</a></li>
      <li class="layui-nav-item"><a href="">商品管理</a></li>
      <li class="layui-nav-item"><a href="">用户</a></li>
      <li class="layui-nav-item">
        <a href="javascript:;">其它系统</a>
        <dl class="layui-nav-child">
          <dd><a href="">邮件管理</a></dd>
          <dd><a href="">消息管理</a></dd>
          <dd><a href="">授权管理</a></dd>
        </dl>
      </li>
    </ul>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
          贤心
        </a>
        <dl class="layui-nav-child">
          <dd><a href="">基本资料</a></dd>
          <dd><a href="">安全设置</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item"><a href="">注销</a></li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">我的信息</a>
          <dl class="layui-nav-child">
            <dd><a href="#">我的订单</a></dd>
            <dd><a href="javascript:;">我的好友</a></dd>
            <dd><a href="javascript:;">我的关注</a></dd>
            <dd><a href="MyWallet.html">我的钱包</a></dd>
            <dd><a href="javascript:;">信息完善</a></dd>
			<dd><a href="javascript:;">密码找回</a></dd>
			<dd><a href="">超链接</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">教练查看</a>
          <!-- <dl class="layui-nav-child">
            <dd><a href="javascript:;">列表一</a></dd>
            <dd><a href="javascript:;">列表二</a></dd>
            <dd><a href="">超链接</a></dd>
          </dl> -->
        </li>
        <li class="layui-nav-item"><a href="">场馆信息</a></li>
        <li class="layui-nav-item"><a href="">主页图文</a></li>
      </ul>
    </div>
  </div>
  <!-- 我的好友 -->
	<div class="layui-body">
		<div style="padding: 15px;">
			 <div style="padding: 15px;">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
						<legend>我的好友</legend>
				</fieldset>
				
				<div class="layui-form">
				  <table class="layui-table" id="showAllMyFriends" lay-filter="MyFriends">
				  </table>
				</div>
			</div>
		</div>
	</div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>
<script src="../assets/layui/layui.js"></script>
<script type="text/html" id="toolbarMyFriends">
	<button class="layui-btn layui-btn-sm" lay-event="personText">查看</button>
    <button class="layui-btn layui-btn-sm" lay-event="deleteFriend">删除</button>
</script>
<script>
//JavaScript代码区域

/* $(function(){
	$.ajax({
		url:"../attention/showAllMyFriends",
		type:"get",
		dataType:"json",
		success : function(data){
			var contect="";
			for (var i = 0; i < data.length; i++) {
				var user=data[i];
				contect+='<tr>'
				+'<td>'+user.id+'</td>'
				+'<td>'+user.account+'</td>'
				+'<td><input type="button" value="查看详细信息" onclick="selectOneByHuGuanId('+user.id+')"></button></td>'
				+'<td><input type="button" value="删除好友" onclick="deleteFriend('+user.id+')"></button></td>'
			  +'</tr>'
			}
			$("#myfriendstitle").append(contect);
		}
	});
});

function selectOneByHuGuanId(uid){
	$.ajax({
		url:"../attention/selectOneByHuGuanId",
		type:"post",
		data: {
			id:uid
		},
		dataType:"json",
		success : function(data){
			//跳转到对应的详细信息显示页面
			alert("可以进入");
		}
});
} 

function deleteFriend(uid){
	$.ajax({
		url:"../attention/deleteFriend",
		type:"post",
		data: {
			friendID:uid
		},
	});
}
 */

//我的好友
layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function(){
	 var laypage = layui.laypage//分页
	  ,table = layui.table //表格
	  ,$ = layui.$ //由于layer弹层依赖jQuery，所以可以直接得到
	  ,layer = layui.layer;
	  
	  table.render({
		    elem: '#showAllMyFriends',
		    url: '../attention/showAllMyFriends',//数据接口
		    page: true, //开启分页
		   /*  toolbar:'true', */
		    cols: [[ //表头
		      {field: 'id', title: '好友编号', sort: true, fixed: 'left'},
		      {field: 'account', title: '好友账号'},
		      {field: '', title: '操作',toolbar:'#toolbarMyFriends'}
		    ]]
		});
	
	
	  table.on('tool(MyFriends)', function(obj){//注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
		  var data=obj.data;
		  var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
		  var id=data.id;
		  if(layEvent ==='personText'){ //查看
			  alert(layEvent);
			   alert("look");
			  } else if(layEvent ==='deleteFriend'){ //删除
			    layer.confirm('真的删除好友吗', function(index){
			      layer.close(index);
			      //向服务端发送删除指令
			      $.ajax({
			  		url:"../attention/deleteFriend",
			  		type:"post",
			  		data: {
			  			friendID:id
			  		},
			  		success : function(result){
			  			alert(result)
			  			window.location.reload();
			  		}
			  	});
			    });
			  } 
		});
		
	});

</script>
</body>
</html>

