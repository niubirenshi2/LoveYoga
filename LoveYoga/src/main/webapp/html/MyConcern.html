<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>我的关注</title>
  
  <link rel="stylesheet" href="../assets/layui/css/layui.css" media="all">
<style>
.layui-table-cell {
            height: 100%;
            max-width: 100%;
        }
 .layui-table-cell img{
            height: 100%;
            width: 100%;
        } 

</style>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">爱上瑜伽</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item"><a href="">控制台</a></li>
      <li class="layui-nav-item"><a href="">商品管理</a></li>
      <li class="layui-nav-item"><a href="">用户</a></li>
      <li class="layui-nav-item">
        <a href="javascript:;">其它系统</a>
        <dl class="layui-nav-child">
          <dd><a href="">邮件管理</a></dd>
          <dd><a href="">消息管理</a></dd>
          <dd><a href="">授权管理</a></dd>
        </dl>
      </li>
    </ul>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
          贤心
        </a>
        <dl class="layui-nav-child">
          <dd><a href="">基本资料</a></dd>
          <dd><a href="">安全设置</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item"><a href="">注销</a></li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">我的信息</a>
          <dl class="layui-nav-child">
            <dd><a href="MyOrder.html">我的订单</a></dd>
            <dd><a href="MyFridents.html">我的好友</a></dd>
            <dd><a href="MyConcern.html">我的关注</a></dd>
            <dd><a href="MyNews.html">我的消息</a></dd>
            <dd><a href="MyWallet.html">我的钱包</a></dd>
            <dd><a href="javascript:;">信息完善</a></dd>
			<dd><a href="javascript:;">密码找回</a></dd>
			<dd><a href="">超链接</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">教练查看</a>
          <!-- <dl class="layui-nav-child">
            <dd><a href="javascript:;">列表一</a></dd>
            <dd><a href="javascript:;">列表二</a></dd>
            <dd><a href="">超链接</a></dd>
          </dl> -->
        </li>
        <li class="layui-nav-item"><a href="">场馆信息</a></li>
        <li class="layui-nav-item"><a href="">主页图文</a></li>
      </ul>
    </div>
  </div>
  
	<!-- 我的关注 -->
  <div class="layui-body" >
		<div style="padding: 15px;">
			 <div style="padding: 15px;">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
						<legend>我的关注</legend>
				</fieldset>
				<table class="layui-table" id="demo" lay-filter="mefouceAll">
				</table>
				
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
						<legend>我的朋友圈</legend>
				</fieldset>
				<table class="layui-table-cell" id="selectMyCircle" lay-filter="selectMyCircle">
				</table>
  		</div>
	</div>
</div>



 
 
 
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>
<script src="../assets/layui/layui.js"></script>
<script type="text/html" id="toolbarDemo">
	<button class="layui-btn layui-btn-sm" lay-event="look">查看</button>
    <button class="layui-btn layui-btn-sm" lay-event="delete">删除</button>
</script>
<script>
//我的关注
layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function(){
	 var laypage = layui.laypage//分页
	  ,table = layui.table //表格
	  ,$ = layui.$ //由于layer弹层依赖jQuery，所以可以直接得到
	  ,layer = layui.layer;
	  
	  table.render({
		    elem: '#demo',
		    url: '../attention/mefouceAll',//数据接口
		    page: true, //开启分页
		   /*  toolbar:'true', */
		    cols: [[ //表头
		      {field: 'id', title: '关注人编号', sort: true, fixed: 'left'},
		      {field: 'account', title: '关注人账号'},
		      {field: '', title: '操作',toolbar:'#toolbarDemo'}
		    ]]
		});
	
	
table.on('tool(mefouceAll)', function(obj){//注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
	  var data=obj.data;
	  var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
	  var id=data.id;
	  if(layEvent ==='look'){ //查看
		   alert("look");
		  } else if(layEvent ==='delete'){ //删除
		    layer.confirm('真的取消关注吗', function(index){
		      layer.close(index);
		      //向服务端发送删除指令
		      $.ajax({
		  		url:"../attention/deleteFollowOne",
		  		type:"post",
		  		data: {
		  			ya_fid:id
		  		},
		  		success : function(result){
		  		 	alert(result);
		  			/* window.location.reload(); */ 
		  		}
		  	});
		    });
		  } 
	});
	
});	


//我的朋友圈
layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function(){
	 var laypage = layui.laypage//分页
	  ,table = layui.table //表格
	  ,$ = layui.$ //由于layer弹层依赖jQuery，所以可以直接得到
	  ,layer = layui.layer;
	  
	  table.render({
		    elem: '#selectMyCircle',
		    url: '../attention/selectMyCircle',//数据接口
		    page: true, //开启分页
		    limits: [5,10,20]  //每页条数的选择项，默认：[10,20,30,40,50,60,70,80,90]。
            ,limit: 5,
		   /*  toolbar:'true', */
		    cols: [[ //表头
		      {field: 'id', title: '信息编号', sort: true,style:'height:100px', fixed: 'left'},
		      {templet: '<div>{{d.user.account}}</div>',style:'height:100px', title: '朋友圈发送人名称'},
		      {field: 'text', title: '文字',style:'height:100px'},
		      {field: 'img', title: '图片', style:'height:100px',templet:'<div><img src="{{d.img}}"></div>'},
		      {field: 'creatTime', title: '发送时间',style:'height:100px', sort: true,templet :"<div>{{layui.util.toDateString(d.creatTime, 'yyyy-MM-dd HH:mm:ss')}}</div>"}
		    ]]
		});
});	
</script>
</body>
</html>
 <!-- width="100%" height="100%" -->

